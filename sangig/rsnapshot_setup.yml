- hosts: sangig 
  gather_facts: no
  tasks:
    - name: copy rsnapshot sangig06
      template:
        src: templates/rsnapshot_configs/rsnapshot_sangig06.conf.j2
        dest: /root/rsnapshot_sangig06.conf
        owner: root
        group: root
        mode: 0644
      become: yes

    - name: copy rsnapshot 10.0.2.2
      template:
        src: templates/rsnapshot_configs/rsnapshot_10.0.2.2.conf.j2
        dest: /root/rsnapshot_10.0.2.2.conf
        owner: root
        group: root
        mode: 0644
      become: yes

    - name: copy rsnapshot 10.0.2.5
      template:
        src: templates/rsnapshot_configs/rsnapshot_10.0.2.5.conf.j2
        dest: /root/rsnapshot_10.0.2.5.conf
        owner: root
        group: root
        mode: 0644
      become: yes

    - name: Make cron task 
      template:
        src: templates/rsnapshot_configs/rsnapshot.j2
        dest: /etc/cron.d/rsnapshot
        owner: root
        group: root
        mode: 0644
      become: yes

    - name: Make Check MountPoints
      template:
        src: templates/rsnapshot_configs/checkMountPoints.j2
        dest: /etc/cron.hourly/checkMountPoints
        owner: root
        group: root
        mode: 0755
      become: yes

    - name: Make check empty dir mount point
      template:
        src: templates/rsnapshot_configs/preexecCheckMount.j2
        dest: /root/preexecCheckMount
        owner: root
        group: root
        mode: 0755
      become: yes

    - name: create dir
      file:
        path: /mnt/10.0.2.2/
        state: directory
        owner: root
        group: root
        mode: 0755
      become: yes

    - name: create dir
      file:
        path: /mnt/sangig06/
        state: directory
        owner: root
        group: root
        mode: 0755
      become: yes

    - name: create dir
      file:
        path: /mnt/10.0.2.5/
        state: directory
        owner: root
        group: root
        mode: 0755
      become: yes
